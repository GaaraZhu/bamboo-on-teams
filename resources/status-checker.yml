StatusChecker:
  name: ${self:custom.aws.stepFunction.name}
  definition:
    StartAt: DelayTheChecking
    States:
      DelayTheChecking:
        Type: Wait
        Seconds: 300
        Next: CheckStatus

      CheckStatus:
        Type: Task
        Resource:
          Fn::GetAtt: [checkStatusFunc, Arn]
        Retry:
          - ErrorEquals:
              - jobNotFinishedError
            IntervalSeconds: 30
            BackoffRate: 1
            MaxAttempts: 50
        Next: FinalEndState

      FinalEndState:
        Type: Pass
        End: true
